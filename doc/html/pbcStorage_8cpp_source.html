<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Playbook Creator: src/util/pbcStorage.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Playbook Creator
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b7878ad5ecbf2506f4125b9d34c97e45.html">util</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">pbcStorage.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="pbcStorage_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pbcStorage_8h.html">pbcStorage.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pbcPlaybook_8h.html">models/pbcPlaybook.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pbcConfig_8h.html">util/pbcConfig.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pbcExceptions_8h.html">util/pbcExceptions.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;boost/archive/text_oarchive.hpp&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;boost/archive/text_iarchive.hpp&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;istream&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;botan/botan.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;botan/pbkdf.h&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;botan/secmem.h&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;botan/data_src.h&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;QPrinter&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;QPainter&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pbcVersion_8h.html">pbcVersion.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keywordtype">void</span> PBCStorage::checkVersion(<span class="keyword">const</span> std::string &amp;version) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// TODO(obr): do better version checking</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">int</span> result = <a class="code" href="classPBCVersion.html#a3a511e7360288edbcb4c48b383022173">PBCVersion::compareCurrentVersionTo</a>(version);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span>(result &lt; 0) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classPBCStorageException.html">PBCStorageException</a>(<span class="stringliteral">&quot;Cannot load playbook because it&#39;s created by a newer version of Playbook-Creator. Please download the latest version of Playbook-Creator!&quot;</span>);  <span class="comment">//NOLINT</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    assert(result &gt;= 0);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    assert(BOTAN_VERSION_CODE &gt;= BOTAN_VERSION_CODE_FOR(1, 10, 9));</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keywordtype">void</span> PBCStorage::generateAndSetKey(<span class="keyword">const</span> std::string &amp;password) {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    Botan::AutoSeeded_RNG rng;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    Botan::SecureVector&lt;Botan::byte&gt; salt = rng.random_vec(_SALT_SIZE);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    boost::shared_ptr&lt;Botan::PBKDF&gt; pbkdf(Botan::get_pbkdf(_PBKDF));  <span class="comment">// NOLINT</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    Botan::OctetString key = pbkdf-&gt;derive_key(_KEY_SIZE, password,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                               &amp;salt[0], salt.size(),</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                               _PBKDF_ITERATIONS);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    setCryptoKey(key, salt);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keywordtype">void</span> PBCStorage::setCryptoKey(Botan::OctetString key,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                        Botan::SecureVector&lt;Botan::byte&gt; salt) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    _saltSP.reset(<span class="keyword">new</span> Botan::SecureVector&lt;Botan::byte&gt;(salt));</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    _keySP.reset(<span class="keyword">new</span> Botan::OctetString(key));</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keywordtype">void</span> PBCStorage::encrypt(<span class="keyword">const</span> std::string&amp; input,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                         std::ofstream&amp; outFile) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    assert(_keySP != NULL &amp;&amp; _saltSP != NULL);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    outFile.write((<span class="keyword">const</span> <span class="keywordtype">char</span>*)_saltSP-&gt;begin(), _saltSP-&gt;size());</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    Botan::Pipe hasher(<span class="keyword">new</span> Botan::Hash_Filter(_HASH, _HASH_SIZE));</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    Botan::Pipe encryptor(Botan::get_cipher(_CIPHER,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                            *_keySP,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                            Botan::ENCRYPTION),</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                          <span class="keyword">new</span> Botan::DataSink_Stream(outFile));</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    hasher.process_msg(input);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    Botan::SecureVector&lt;Botan::byte&gt; hash = hasher.read_all(0);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    outFile.write((<span class="keyword">const</span> <span class="keywordtype">char</span>*)hash.begin(), hash.size());</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    encryptor.process_msg(input);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keywordtype">void</span> PBCStorage::decrypt(<span class="keyword">const</span> std::string &amp;password,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                         std::ostream &amp;ostream,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                         std::ifstream &amp;inFile) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    boost::shared_ptr&lt;Botan::PBKDF&gt; pbkdf(Botan::get_pbkdf(_PBKDF));</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    Botan::SecureVector&lt;Botan::byte&gt; salt(_SALT_SIZE);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    inFile.read(reinterpret_cast&lt;char*&gt;(&amp;salt[0]), _SALT_SIZE);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    Botan::SecureVector&lt;Botan::byte&gt; hash(_HASH_SIZE);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    inFile.read(reinterpret_cast&lt;char*&gt;(&amp;hash[0]), _HASH_SIZE);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    Botan::OctetString key = pbkdf-&gt;derive_key(_KEY_SIZE, password,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                               &amp;salt[0], salt.size(),</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                               _PBKDF_ITERATIONS);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    Botan::Pipe decryptor(Botan::get_cipher(_CIPHER, key, Botan::DECRYPTION),</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                          <span class="keyword">new</span> Botan::Fork(</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                              <span class="keyword">new</span> Botan::Hash_Filter(_HASH, _HASH_SIZE),</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                              <span class="keyword">new</span> Botan::DataSink_Stream(ostream)));</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    Botan::DataSource_Stream source(inFile);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    decryptor.process_msg(source);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    Botan::SecureVector&lt;Botan::byte&gt; calculatedHash = decryptor.read_all(0);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span>(calculatedHash != hash) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classPBCDecryptionException.html">PBCDecryptionException</a>(<span class="stringliteral">&quot;wrong password?&quot;</span>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        setCryptoKey(key, salt);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classPBCStorage.html#aaf7035643b7ab3f271e5afc79602df49">  155</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPBCStorage.html#aaf7035643b7ab3f271e5afc79602df49">PBCStorage::init</a>(<span class="keyword">const</span> std::string &amp;fileName) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    _currentPlaybookFileName = fileName;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    _keySP.reset();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    _saltSP.reset();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classPBCStorage.html#aa4227135351e78990b614fe8ae22528d">  167</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPBCStorage.html#aa4227135351e78990b614fe8ae22528d">PBCStorage::savePlaybook</a>(<span class="keyword">const</span> std::string&amp; password,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                              <span class="keyword">const</span> std::string&amp; fileName) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    generateAndSetKey(password);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    _currentPlaybookFileName = fileName;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="classPBCStorage.html#affea0f13e99cce945d62c098ed007c38">writeToCurrentPlaybookFile</a>();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="classPBCStorage.html#a0a2a4dfd0303176fb524407204822ffd">  178</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPBCStorage.html#a0a2a4dfd0303176fb524407204822ffd">PBCStorage::automaticSavePlaybook</a>() {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">if</span>(_keySP != NULL &amp;&amp; _saltSP != NULL) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="classPBCStorage.html#affea0f13e99cce945d62c098ed007c38">writeToCurrentPlaybookFile</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classPBCStorageException.html">PBCStorageException</a>(<span class="stringliteral">&quot;Cannot save playbook automatically whitout key. The playbook must be saved manually (invoke savePlaybook()-method) first&quot;</span>);  <span class="comment">//NOLINT</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="classPBCStorage.html#affea0f13e99cce945d62c098ed007c38">  192</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPBCStorage.html#affea0f13e99cce945d62c098ed007c38">PBCStorage::writeToCurrentPlaybookFile</a>() {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    assert(_currentPlaybookFileName != <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    std::string extension = _currentPlaybookFileName.substr(_currentPlaybookFileName.size() - 4);  <span class="comment">//NOLINT</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    assert(extension == <span class="stringliteral">&quot;.pbc&quot;</span>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    std::stringbuf buff;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    std::ostream ostream(&amp;buff);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    ostream &lt;&lt; <span class="stringliteral">&quot;Playbook-Creator&quot;</span> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    ostream &lt;&lt; <span class="stringliteral">&quot;playbook&quot;</span> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    ostream &lt;&lt; <a class="code" href="classPBCVersion.html#adfce927070fc1e2574951b15f7b19b66">PBCVersion::getVersionString</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    boost::archive::text_oarchive archive(ostream);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    archive &lt;&lt; *<a class="code" href="classPBCSingleton.html#aa9c8c2f34a8b5b2c47ad1440c9950145">PBCPlaybook::getInstance</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    std::ofstream ofstream(_currentPlaybookFileName,</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                           std::ios_base::out | std::ios_base::binary);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        encrypt(buff.str(), ofstream);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    } <span class="keywordflow">catch</span>(std::exception&amp; e) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        ofstream.close();</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="comment">// std::remove(fileName.c_str());</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        std::cout &lt;&lt; e.what() &lt;&lt; std::endl;  <span class="comment">// TODO(obr): message to user</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    ofstream.close();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="classPBCStorage.html#a2ca6fb0847d9cb1f7a556e9283b22a5c">  225</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPBCStorage.html#a2ca6fb0847d9cb1f7a556e9283b22a5c">PBCStorage::loadPlaybook</a>(<span class="keyword">const</span> std::string &amp;password,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                              <span class="keyword">const</span> std::string &amp;fileName) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    std::string extension = fileName.substr(fileName.size() - 4);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    assert(extension == <span class="stringliteral">&quot;.pbc&quot;</span>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    std::stringbuf buff;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    std::ostream ostream(&amp;buff);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    std::ifstream ifstream(fileName);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        decrypt(password,</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            ostream,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            ifstream);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    } <span class="keywordflow">catch</span>(std::exception&amp; e) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classPBCStorageException.html">PBCStorageException</a>(e.what());  <span class="comment">// TODD(obr): message to user</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    _currentPlaybookFileName = fileName;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    std::istream istream(&amp;buff);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">int</span> kBuffSize = 100;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">char</span> buffer[kBuffSize];</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    istream.getline(buffer, kBuffSize);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    std::string pbcString(buffer);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    assert(pbcString == <span class="stringliteral">&quot;Playbook-Creator&quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    istream.getline(buffer, kBuffSize);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    std::string pbString(buffer);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    assert(pbString == <span class="stringliteral">&quot;playbook&quot;</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    istream.getline(buffer, kBuffSize);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    std::string version(buffer);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    checkVersion(version);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    boost::archive::text_iarchive archive(istream);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    archive &gt;&gt; *<a class="code" href="classPBCSingleton.html#aa9c8c2f34a8b5b2c47ad1440c9950145">PBCPlaybook::getInstance</a>();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="classPBCStorage.html#a744f63ba0f1cda32c7d009ab6bb23277">  279</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPBCStorage.html#a744f63ba0f1cda32c7d009ab6bb23277">PBCStorage::exportAsPDF</a>(<span class="keyword">const</span> std::string&amp; fileName,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                             std::list&lt;boost::shared_ptr&lt;PBCPlayView&gt;&gt; playViews,  <span class="comment">//NOLINT</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> paperWidth,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> paperHeight,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> columns,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rows,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> marginLeft,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> marginRight,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> marginTop,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> marginBottom) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    std::string extension = fileName.substr(fileName.size() - 4);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    assert(extension == <span class="stringliteral">&quot;.pdf&quot;</span>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    QPrinter printer(QPrinter::HighResolution);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    printer.setOutputFileName(QString::fromStdString(fileName));</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    printer.setOutputFormat(QPrinter::PdfFormat);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    printer.setPaperSize(QSizeF(paperWidth, paperHeight), QPrinter::Millimeter);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    printer.setPageMargins(marginLeft,</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                           marginTop,</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                           marginRight,</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                           marginBottom,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                           QPrinter::Millimeter);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    assert(columns &gt; 0);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    assert(rows &gt; 0);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    boost::shared_ptr&lt;qreal&gt; pixelMarginLeftSP(<span class="keyword">new</span> qreal());</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    boost::shared_ptr&lt;qreal&gt; pixelMarginRightSP(<span class="keyword">new</span> qreal());</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    boost::shared_ptr&lt;qreal&gt; pixelMarginTopSP(<span class="keyword">new</span> qreal());</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    boost::shared_ptr&lt;qreal&gt; pixelMarginBottomtSP(<span class="keyword">new</span> qreal());</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    printer.getPageMargins(pixelMarginLeftSP.get(),</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                           pixelMarginTopSP.get(),</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                           pixelMarginRightSP.get(),</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                           pixelMarginBottomtSP.get(),</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                           QPrinter::DevicePixel);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    QSize playSize = printer.pageRect().size();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    playSize.setWidth(playSize.width() / columns);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    playSize.setHeight(playSize.height() / rows);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    printer.setPageMargins(0.0, 0.0, 0.0, 0.0, QPrinter::Millimeter);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    QPainter painter(&amp;printer);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordtype">bool</span> paintBorder = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span>(marginLeft == 0 &amp;&amp;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;       marginRight == 0 &amp;&amp;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;       marginTop == 0 &amp;&amp;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;       marginBottom == 0) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        paintBorder = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    painter.setPen(QPen(QBrush(Qt::red), 20, Qt::DashLine));</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    QRectF borderRect(10,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                      10,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                      printer.paperRect().width() - 10,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                      printer.paperRect().height() - 10);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span>(paintBorder == <span class="keyword">true</span>) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        painter.drawRect(printer.paperRect());</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = 0;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y = 0;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> columnCount = 1;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rowCount = 1;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">for</span>(boost::shared_ptr&lt;PBCPlayView&gt; playViewSP : playViews) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        playViewSP-&gt;render(&amp;painter,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                           QRectF(QPointF(x + *pixelMarginLeftSP, y + *pixelMarginTopSP), playSize),  <span class="comment">//NOLINT</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                           QRectF(),</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                           Qt::IgnoreAspectRatio);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        ++columnCount;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        x = x + playSize.width();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">if</span>(columnCount &gt; columns) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            x = 0;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            y = y + playSize.height();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            ++rowCount;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            columnCount = 1;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">if</span>(rowCount &gt; rows) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="keywordtype">bool</span> successful = printer.newPage();</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            assert(successful == <span class="keyword">true</span>);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">if</span>(paintBorder == <span class="keyword">true</span>) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                painter.drawRect(borderRect);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            rowCount = 1;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            y = 0;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div>
<div class="ttc" id="classPBCStorage_html_aa4227135351e78990b614fe8ae22528d"><div class="ttname"><a href="classPBCStorage.html#aa4227135351e78990b614fe8ae22528d">PBCStorage::savePlaybook</a></div><div class="ttdeci">void savePlaybook(const std::string &amp;password, const std::string &amp;fileName)</div><div class="ttdoc">Wrapper function which generates key and salt and sets the file name first and the actual saving algo...</div><div class="ttdef"><b>Definition:</b> <a href="pbcStorage_8cpp_source.html#l00167">pbcStorage.cpp:167</a></div></div>
<div class="ttc" id="classPBCVersion_html_a3a511e7360288edbcb4c48b383022173"><div class="ttname"><a href="classPBCVersion.html#a3a511e7360288edbcb4c48b383022173">PBCVersion::compareCurrentVersionTo</a></div><div class="ttdeci">static int compareCurrentVersionTo(const std::string &amp;otherVersion)</div><div class="ttdoc">compares the string of the current version to another version string </div><div class="ttdef"><b>Definition:</b> <a href="pbcVersion_8h_source.html#l00055">pbcVersion.h:55</a></div></div>
<div class="ttc" id="classPBCStorage_html_a744f63ba0f1cda32c7d009ab6bb23277"><div class="ttname"><a href="classPBCStorage.html#a744f63ba0f1cda32c7d009ab6bb23277">PBCStorage::exportAsPDF</a></div><div class="ttdeci">void exportAsPDF(const std::string &amp;fileName, std::list&lt; boost::shared_ptr&lt; PBCPlayView &gt;&gt; playViews, const unsigned int paperWidth, const unsigned int paperHeight, const unsigned int columns, const unsigned int rows, const unsigned int marginLeft, const unsigned int marginRight, const unsigned int marginTop, const unsigned int marginBottom)</div><div class="ttdoc">Graphically exports the playbook in PDF file format. </div><div class="ttdef"><b>Definition:</b> <a href="pbcStorage_8cpp_source.html#l00279">pbcStorage.cpp:279</a></div></div>
<div class="ttc" id="classPBCStorage_html_a2ca6fb0847d9cb1f7a556e9283b22a5c"><div class="ttname"><a href="classPBCStorage.html#a2ca6fb0847d9cb1f7a556e9283b22a5c">PBCStorage::loadPlaybook</a></div><div class="ttdeci">void loadPlaybook(const std::string &amp;password, const std::string &amp;fileName)</div><div class="ttdoc">Passes a file to the PBCStorage::decrypt() function to decrypt it and write it to a string buffer...</div><div class="ttdef"><b>Definition:</b> <a href="pbcStorage_8cpp_source.html#l00225">pbcStorage.cpp:225</a></div></div>
<div class="ttc" id="pbcPlaybook_8h_html"><div class="ttname"><a href="pbcPlaybook_8h.html">pbcPlaybook.h</a></div></div>
<div class="ttc" id="pbcStorage_8h_html"><div class="ttname"><a href="pbcStorage_8h.html">pbcStorage.h</a></div></div>
<div class="ttc" id="classPBCStorage_html_aaf7035643b7ab3f271e5afc79602df49"><div class="ttname"><a href="classPBCStorage.html#aaf7035643b7ab3f271e5afc79602df49">PBCStorage::init</a></div><div class="ttdeci">void init(const std::string &amp;fileName)</div><div class="ttdoc">Initializes the PBCStorage instance when a new playbook loaded. Hence the key and the salt have to be...</div><div class="ttdef"><b>Definition:</b> <a href="pbcStorage_8cpp_source.html#l00155">pbcStorage.cpp:155</a></div></div>
<div class="ttc" id="pbcExceptions_8h_html"><div class="ttname"><a href="pbcExceptions_8h.html">pbcExceptions.h</a></div></div>
<div class="ttc" id="classPBCStorage_html_a0a2a4dfd0303176fb524407204822ffd"><div class="ttname"><a href="classPBCStorage.html#a0a2a4dfd0303176fb524407204822ffd">PBCStorage::automaticSavePlaybook</a></div><div class="ttdeci">void automaticSavePlaybook()</div><div class="ttdoc">Checks if key and salt are set before saving the playbook, so we don&#39;t need to enter the password aga...</div><div class="ttdef"><b>Definition:</b> <a href="pbcStorage_8cpp_source.html#l00178">pbcStorage.cpp:178</a></div></div>
<div class="ttc" id="classPBCVersion_html_adfce927070fc1e2574951b15f7b19b66"><div class="ttname"><a href="classPBCVersion.html#adfce927070fc1e2574951b15f7b19b66">PBCVersion::getVersionString</a></div><div class="ttdeci">static std::string getVersionString()</div><div class="ttdoc">builds the full version string </div><div class="ttdef"><b>Definition:</b> <a href="pbcVersion_8h_source.html#l00113">pbcVersion.h:113</a></div></div>
<div class="ttc" id="classPBCSingleton_html_aa9c8c2f34a8b5b2c47ad1440c9950145"><div class="ttname"><a href="classPBCSingleton.html#aa9c8c2f34a8b5b2c47ad1440c9950145">PBCSingleton&lt; PBCPlaybook &gt;::getInstance</a></div><div class="ttdeci">static PBCPlaybook * getInstance()</div><div class="ttdef"><b>Definition:</b> <a href="pbcSingleton_8h_source.html#l00049">pbcSingleton.h:49</a></div></div>
<div class="ttc" id="classPBCDecryptionException_html"><div class="ttname"><a href="classPBCDecryptionException.html">PBCDecryptionException</a></div><div class="ttdoc">An exception that is thrown when something went wrong with the decryption. </div><div class="ttdef"><b>Definition:</b> <a href="pbcExceptions_8h_source.html#l00079">pbcExceptions.h:79</a></div></div>
<div class="ttc" id="classPBCStorageException_html"><div class="ttname"><a href="classPBCStorageException.html">PBCStorageException</a></div><div class="ttdoc">An exception that is thrown when something went wrong with the storage component. ...</div><div class="ttdef"><b>Definition:</b> <a href="pbcExceptions_8h_source.html#l00064">pbcExceptions.h:64</a></div></div>
<div class="ttc" id="pbcVersion_8h_html"><div class="ttname"><a href="pbcVersion_8h.html">pbcVersion.h</a></div><div class="ttdoc">This is the version file. It has been created automatically by version.py which is located in the bas...</div></div>
<div class="ttc" id="classPBCStorage_html_affea0f13e99cce945d62c098ed007c38"><div class="ttname"><a href="classPBCStorage.html#affea0f13e99cce945d62c098ed007c38">PBCStorage::writeToCurrentPlaybookFile</a></div><div class="ttdeci">void writeToCurrentPlaybookFile()</div><div class="ttdoc">Writes the playbook to a string buffer using Boost serialization framework. </div><div class="ttdef"><b>Definition:</b> <a href="pbcStorage_8cpp_source.html#l00192">pbcStorage.cpp:192</a></div></div>
<div class="ttc" id="pbcConfig_8h_html"><div class="ttname"><a href="pbcConfig_8h.html">pbcConfig.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 10 2015 14:34:09 for Playbook Creator by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
